"use strict";(self.webpackChunktime_mgt_=self.webpackChunktime_mgt_||[]).push([[322],{34167:function(K,A,n){var T=n(11124),D=n(30502);A.Z=function(){for(var M=arguments.length,u=new Array(M),j=0;j<M;j++)u[j]=arguments[j];return(0,D.a)(["tag-list"],function(){return T.Md.apply(void 0,u)})}},2672:function(K,A,n){n.d(A,{Z:function(){return jn}});var T=n(27139),D=n.n(T),M=n(55354),u=n.n(M),j=n(34412),U=n.n(j),$=n(69780),I=n.n($),m=n(93981),S=n(35572),_=n(44502),en=n(40784),i=n(81445),g=n(31411),E=n(91975),P=n(37401),x=n(88301),O=n(11124),L=n(50680),b=n.n(L),Z=n(92415),W=Z.Z.react.useState,q=Z.Z.antd.Form;function J(o){var t=q.useForm(o==null?void 0:o.form),e=b()(t,1),a=e[0],l=W(u()({width:600,onCancel:V},o==null?void 0:o.modalProps)),d=b()(l,2),f=d[0],r=d[1],p=W(u()(u()({form:a,layout:"vertical",scrollToFirstError:!0},o==null?void 0:o.formProps),{},{validateMessages:{required:"${label} \u662F\u5FC5\u9009\u5B57\u6BB5"}})),h=b()(p,2),c=h[0],s=h[1],R=W(o==null?void 0:o.data),y=b()(R,2),Y=y[0],w=y[1];function V(){r(function(k){return u()(u()({},k),{},{open:!1})}),a.resetFields(),w(void 0)}return{form:a,modalProps:f,setModalProps:r,formProps:c,setFormProps:s,data:Y,setData:w,close:V}}var tn=n(64168),N=n(89966),z=n(8288),v=n(29541),an=Z.Z.antd,vn=an.Modal,un=an.Form,cn=function(t){var e=t.children,a=t.modalProps,l=t.formProps;return(0,v.jsx)(vn,u()(u()({},a),{},{children:(0,v.jsxs)(un,u()(u()({},l),{},{children:[e,(0,v.jsx)(un.Item,{hidden:!0,children:(0,v.jsx)("button",{"html-type":"submit"})})]}))}))},mn=cn,Q=function(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return function(){for(var l,d=arguments.length,f=new Array(d),r=0;r<d;r++)f[r]=arguments[r];return e.slice(0,-1).reduceRight(function(p,h){return function(c){return h(p(c))}},function(p){return p})(e==null||(l=e[e.length-1])===null||l===void 0?void 0:l.call.apply(l,[e].concat(f)))}},Fn=function(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return function(){for(var l,d=arguments.length,f=new Array(d),r=0;r<d;r++)f[r]=arguments[r];return e==null?void 0:e.slice(1).reduce(function(p,h){return function(c){return h(p(c))}},function(p){return p})(e==null||(l=e[0])===null||l===void 0?void 0:l.call.apply(l,[e].concat(f)))}};function nn(o){return function t(){for(var e=arguments.length,a=new Array(e),l=0;l<e;l++)a[l]=arguments[l];return a.length<o.length?function(){for(var d=arguments.length,f=new Array(d),r=0;r<d;r++)f[r]=arguments[r];return t==null?void 0:t.apply(void 0,D()(a.concat(f)))}:o==null?void 0:o.apply(void 0,a)}}function In(o){return function t(){for(var e=arguments.length,a=new Array(e),l=0;l<e;l++)a[l]=arguments[l];return a.length>=o.length&&!a.slice(0,o.length).includes(__)?o==null?void 0:o(a):function(){for(var d=arguments.length,f=new Array(d),r=0;r<d;r++)f[r]=arguments[r];return t.apply(void 0,_toConsumableArray(a.map(function(p){return p===__&&f.length?f.shift():p})).concat(f))}}}var X=nn(function(o,t){var e=o==null?void 0:o(t);return[NaN,void 0,null].includes(e)?t:e}),fn=n(50540),hn=n.n(fn),pn=["children"],gn=function(t){var e=t.children,a=hn()(t,pn);return e==null?void 0:e(a)},Pn=gn,Cn=Z.Z.react.cloneElement,Mn=nn(function(o,t){return(0,v.jsx)(Pn,{children:function(a){var l,d;return Q.apply(void 0,D()(o))(Cn(t,u()(u()({},a),{},{onChange:Q(X((l=a==null?void 0:a.onChange)!==null&&l!==void 0?l:function(){}),X(t==null||(d=t.props)===null||d===void 0?void 0:d.onChange))})))}})}),_n=n(59042),En=n.n(_n),Dn=nn(function(o,t){var e,a,l,d,f=o.f,r=o.g,p=o.output,h=o.input,c=o.valuePropName,s=c===void 0?"value":c,R=f!=null?f:p,y=r!=null?r:h;return(0,m.cloneElement)(t,En()({onChange:Q(X(t==null||(e=t.props)===null||e===void 0?void 0:e.onChange),X(R))},s,(a=y==null?void 0:y(t==null||(l=t.props)===null||l===void 0?void 0:l[s]))!==null&&a!==void 0?a:t==null||(d=t.props)===null||d===void 0?void 0:d[s]))}),rn=tn.Z.Item;function On(o){var t=o.modalProps,e=o.setModalProps,a=o.formProps,l=o.form,d=o.onSuccess;function f(){return r.apply(this,arguments)}function r(){return r=I()(U()().mark(function p(){var h;return U()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,l.validateFields();case 3:if(h=s.sent,e(function(R){return u()(u()({},R),{},{confirmLoading:!0})}),!(h!=null&&h.id)){s.next=10;break}return s.next=8,(0,O.Vx)(h);case 8:s.next=12;break;case 10:return s.next=12,(0,O.IH)(h);case 12:return s.next=14,d==null?void 0:d();case 14:e(function(R){return u()(u()({},R),{},{open:!1})}),s.next=20;break;case 17:s.prev=17,s.t0=s.catch(0),console.error(s.t0);case 20:return s.prev=20,e(function(R){return u()(u()({},R),{},{confirmLoading:!1})}),s.finish(20);case 23:case"end":return s.stop()}},p,null,[[0,17,20,23]])})),r.apply(this,arguments)}return(0,v.jsxs)(mn,{modalProps:u()({onOk:f},t),formProps:u()({onFinish:f,initialValues:{color:"#f5222d"}},a),children:[(0,v.jsx)(rn,{name:"id",hidden:!0,children:(0,v.jsx)(N.Z,{})}),(0,v.jsx)(rn,{name:"name",rules:[{required:!0,message:"\u6807\u7B7E\u540D\u4E0D\u80FD\u4E3A\u7A7A"}],label:"\u6807\u7B7E\u540D",children:(0,v.jsx)(N.Z,{placeholder:"\u6807\u7B7E\u540D",allowClear:!0,autoComplete:"off"})}),(0,v.jsx)(rn,{valuePropName:"color",name:"color",rules:[{required:!0,message:"\u8BF7\u9009\u4E2A\u989C\u8272"}],label:"\u989C\u8272",children:Q(Mn([Dn({valuePropName:"color",f:function(h){return h==null?void 0:h.hex}})]))((0,v.jsx)(z.xS,{width:"unset",disableAlpha:!0,presetColors:["#f5222d","#fa541c","#fa8c16","#faad14","#fadb14","#a0d911","#52c41a","#13c2c2","#1890ff","#2f54eb","#722ed1","#eb2f96"]}))})]})}var An=n(34167),Tn=S.Z.useToken;function jn(o){var t,e,a=(0,An.Z)(),l=a.data,d=a.isFetching,f=a.refetch,r=l==null?void 0:l.data,p=o||{},h=p.value,c=h===void 0?[]:h,s=p.onChange,R=s===void 0?function(){}:s,y=J(),Y=(0,m.useRef)(0),w=Tn(),V=w.token;function k(C){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3e3;Y.current=setTimeout(C,F)}function ln(){clearTimeout(Y.current)}function Sn(C){return function(F){F.preventDefault(),_.Z.confirm({title:"\u64CD\u4F5C\u4E0D\u53EF\u64A4\u9500",onOk:function(){var B=I()(U()().mark(function on(){return U()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,(0,O.Od)(C);case 2:return G.next=4,sn();case 4:case"end":return G.stop()}},on)}));function H(){return B.apply(this,arguments)}return H}()})}}function Rn(){y.setModalProps(function(C){return u()(u()({},C),{},{open:!0})})}function dn(C){return function(){y.form.setFieldsValue(C),y.setModalProps(function(F){return u()(u()({},F),{},{open:!0})})}}function sn(){f()}return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(On,u()(u()({},y),{},{onSuccess:sn})),(0,v.jsx)(en.Z,{spinning:d,children:(0,v.jsxs)(i.Z,{direction:"vertical",size:"small",style:{width:"100%"},children:[(0,v.jsxs)("div",{style:{borderBottom:"1px solid #e9e9e9"},children:[(0,v.jsx)(g.Z,{checked:(r==null?void 0:r.length)===c.length,indeterminate:(c==null?void 0:c.length)>0&&(c==null?void 0:c.length)<((t=r==null?void 0:r.length)!==null&&t!==void 0?t:0),onChange:function(){if((r==null?void 0:r.length)===(c==null?void 0:c.length))R([]);else{var F;R(r==null||(F=r.map)===null||F===void 0?void 0:F.call(r,function(B){return B.id}))}},children:"\u5168\u9009"}),(0,v.jsx)("a",{onClick:function(){var F=r==null?void 0:r.reduce(function(B,H){return c.includes(H.id)?B:[].concat(D()(B),[H.id])},[]);R(F)},children:"\u53CD\u9009"})]}),(0,v.jsxs)(E.Z,{style:{borderStyle:"dashed",background:"#fff"},onClick:Rn,children:[(0,v.jsx)(P.Z,{})," \u65B0\u589E\u6807\u7B7E"]}),(0,v.jsx)(i.Z,{size:[0,4],wrap:!0,style:{width:"100%"},children:r==null||(e=r.map)===null||e===void 0?void 0:e.call(r,function(C){return(0,v.jsxs)(E.Z,{onClick:function(){var B=C.id,H=c.includes(B)?c.filter(function(on){return on!==B}):c.concat(B);R(H)},closable:!0,onClose:Sn(C.id),color:C.color,onTouchStart:function(){k(dn(C),500)},onTouchEnd:ln,onMouseDown:function(){k(dn(C),500)},onMouseUp:ln,children:[c.includes(C.id)&&(0,v.jsx)(x.Z,{twoToneColor:V.colorPrimary})," ",C.name]},C.id)})})]})})]})}},11124:function(K,A,n){n.d(A,{IH:function(){return u},Md:function(){return $},Od:function(){return j},Vx:function(){return U}});var T=n(55354),D=n.n(T),M=n(44521),u=function(){for(var m=arguments.length,S=new Array(m),_=0;_<m;_++)S[_]=arguments[_];return M.iP.post.apply(M.iP,["time-mgt/v1/tag/create"].concat(S))},j=function(m,S){return M.iP.delete("time-mgt/v1/tag/".concat(m),S)},U=function(){for(var m=arguments.length,S=new Array(m),_=0;_<m;_++)S[_]=arguments[_];return M.iP.put.apply(M.iP,["time-mgt/v1/tag/update"].concat(S))},$=function(m){return M.iP.get("time-mgt/v1/tag/list",D()({notify:"fail"},m))}},84937:function(K,A,n){n.d(A,{e:function(){return D}});var T={token:{colorPrimary:"#f5222d"}},D="time-mgt";A.Z=T},70834:function(K,A,n){n.d(A,{Gy:function(){return $}});var T=1,D=1e3*T,M=1e3*D,u=1e3*M,j=60*u,U=60*j;function $(I){if(I){var m=~~(I/(1e3*1e3*1e3*60*60)),S=(I%(1e3*1e3*1e3*60*60)/(1e3*1e3*1e3*60)).toFixed(2),_="";return m&&(_+="".concat(m,"\u5C0F\u65F6")),S&&(_+="".concat(S,"\u5206\u949F")),_}}},92415:function(K,A,n){var T,D=n(33748),M=n(54826),u=n(93981),j=n(32841),U=n(17635);A.Z={antd:D,reactQuery:M,react:T||(T=n.t(u,2)),reactDnD:j,reactRouterDom:U}},44521:function(K,A,n){n.d(A,{iP:function(){return m}});var T=n(59042),D=n.n(T),M=n(55354),u=n.n(M),j=n(92415),U=n(28983),$=j.Z.antd.message,I={200:"\u64CD\u4F5C\u6210\u529F\u3002",201:"\u65B0\u5EFA\u6216\u4FEE\u6539\u6570\u636E\u6210\u529F\u3002",202:"\u4E00\u4E2A\u8BF7\u6C42\u5DF2\u7ECF\u8FDB\u5165\u540E\u53F0\u6392\u961F\uFF08\u5F02\u6B65\u4EFB\u52A1\uFF09\u3002",204:"\u5220\u9664\u6570\u636E\u6210\u529F\u3002",400:"\u53D1\u51FA\u7684\u8BF7\u6C42\u6709\u9519\u8BEF\uFF0C\u670D\u52A1\u5668\u6CA1\u6709\u8FDB\u884C\u65B0\u5EFA\u6216\u4FEE\u6539\u6570\u636E\u7684\u64CD\u4F5C\u3002",401:"\u7528\u6237\u6CA1\u6709\u6743\u9650\uFF08\u4EE4\u724C\u3001\u7528\u6237\u540D\u3001\u5BC6\u7801\u9519\u8BEF\uFF09\u3002",403:"\u7528\u6237\u5F97\u5230\u6388\u6743\uFF0C\u4F46\u662F\u8BBF\u95EE\u662F\u88AB\u7981\u6B62\u7684\u3002",404:"\u53D1\u51FA\u7684\u8BF7\u6C42\u9488\u5BF9\u7684\u662F\u4E0D\u5B58\u5728\u7684\u8BB0\u5F55\uFF0C\u670D\u52A1\u5668\u6CA1\u6709\u8FDB\u884C\u64CD\u4F5C\u3002",405:"\u8BF7\u6C42\u65B9\u5F0F\u4E0D\u5BF9",406:"\u8BF7\u6C42\u7684\u683C\u5F0F\u4E0D\u53EF\u5F97\u3002",410:"\u8BF7\u6C42\u7684\u8D44\u6E90\u88AB\u6C38\u4E45\u5220\u9664\uFF0C\u4E14\u4E0D\u4F1A\u518D\u5F97\u5230\u7684\u3002",422:"\u5F53\u521B\u5EFA\u4E00\u4E2A\u5BF9\u8C61\u65F6\uFF0C\u53D1\u751F\u4E00\u4E2A\u9A8C\u8BC1\u9519\u8BEF\u3002",500:"\u670D\u52A1\u5668\u53D1\u751F\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u670D\u52A1\u5668\u3002",502:"\u7F51\u5173\u9519\u8BEF\u3002",503:"\u670D\u52A1\u4E0D\u53EF\u7528\uFF0C\u670D\u52A1\u5668\u6682\u65F6\u8FC7\u8F7D\u6216\u7EF4\u62A4\u3002",504:"\u7F51\u5173\u8D85\u65F6\u3002"},m=U.Z.create({baseURL:"/api/",timeout:1e4,timeoutErrorMessage:"\u8FDE\u63A5\u8D85\u65F6\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u540E\u518D\u8BD5"});m.interceptors.request.use(function(i){return i.headers.setAuthorization("Bearer ".concat(localStorage.getItem("token"))),i}),m.interceptors.response.use(function(i){var g,E;if(i!=null&&(g=i.data)!==null&&g!==void 0&&g.ok)return i;var P={config:i.config,isAxiosError:!1,toJSON:function(){return{}},response:i,request:i.request,message:i==null||(E=i.data)===null||E===void 0?void 0:E.errMsg,name:"biz error"};throw P}),m.interceptors.response.use(function(i){var g,E,P=i.data,x=i.config;if((g=[!0,"success"])!==null&&g!==void 0&&g.includes((E=x==null?void 0:x.notify)!==null&&E!==void 0?E:!1)){var O=(P==null?void 0:P.message)||"\u64CD\u4F5C\u6210\u529F";$.success({content:O,key:O})}return P}),m.interceptors.response.use(void 0,function(i){var g,E=i!=null?i:{},P=E.response,x=E.message,O=E.config,L=O!=null?O:{},b=L.reAuth,Z=L.notify,W=L.sneakyThrows;if((P==null?void 0:P.status)===401)return b?S(O):$.warning({key:P.status,content:"\u8BF7\u5148\u767B\u5F55",onClose:function(){var N,z;localStorage.removeItem("token"),(N=location.pathname)!==null&&N!==void 0&&(z=N.toLocaleLowerCase())!==null&&z!==void 0&&z.includes("/user-center/login/")||location.replace("/user-center/login/")}});if((g=[!0,"fail"])!==null&&g!==void 0&&g.includes(Z!=null?Z:!0)){var q=x.match("Network Error")&&"\u7F51\u7EDC\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u3002",J=q||x||I[P==null?void 0:P.status]||"\u672A\u77E5\u9519\u8BEF";$.error({key:J,content:J})}if(W)return P;throw i});function S(i){return m.get("/uc/oauth2/refresh",{reAuth:!1,notify:"fail",params:{token:localStorage.getStorage("refresh_token")}}).then(function(g){return localStorage.setItem("token",g.data.token),localStorage.setItem("refresh_token",g.data.refresh_token),m(u()(u()({},i),{},{reAuth:!1}))})}var _=["query","mutation"],en=_.reduce(function(i,g){return u()(u()({},i),{},D()({},g,function(E,P){return function(){for(var x=arguments.length,O=new Array(x),L=0;L<x;L++)O[L]=arguments[L];return m.post(E,u()({query:"".concat(g," {").concat(O[0].reduce(function(b,Z,W){return b+Z+(O[W+1]||"")},""),"}")},P))}}))},{})}}]);
