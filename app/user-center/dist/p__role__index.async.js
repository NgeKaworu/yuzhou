(self.webpackChunkuser_center_=self.webpackChunkuser_center_||[]).push([[222],{97147:function(t,m,e){"use strict";e.d(m,{Ue:function(){return l},Vx:function(){return h},cn:function(){return o},pb:function(){return c},qn:function(){return i}});var a=e(44521),l=function(){for(var u=arguments.length,n=new Array(u),r=0;r<u;r++)n[r]=arguments[r];return a.iP.post.apply(a.iP,["user-center/perm/create"].concat(n))},o=function(u){for(var n=arguments.length,r=new Array(n>1?n-1:0),p=1;p<n;p++)r[p-1]=arguments[p];return a.iP.delete.apply(a.iP,["user-center/perm/remove/".concat(u)].concat(r))},h=function(){for(var u=arguments.length,n=new Array(u),r=0;r<u;r++)n[r]=arguments[r];return a.iP.put.apply(a.iP,["user-center/perm/update"].concat(n))},c=function(){for(var u=arguments.length,n=new Array(u),r=0;r<u;r++)n[r]=arguments[r];return a.iP.get.apply(a.iP,["user-center/perm/list"].concat(n)).then(function(p){var y;return{data:(y=p.data)===null||y===void 0?void 0:y.sort(function(j,M){var C,b;return((C=j.order)!==null&&C!==void 0?C:0)-((b=M.order)!==null&&b!==void 0?b:0)})}})},i=function(){for(var u=arguments.length,n=new Array(u),r=0;r<u;r++)n[r]=arguments[r];return a.iP.get.apply(a.iP,["user-center/perm/validate"].concat(n))}},89246:function(t,m,e){"use strict";var a=e(55354),l=e.n(a),o=e(7529),h=e.n(o);function c(i,f){var u=[],n=[],r=h()(i),p;try{for(r.s();!(p=r.n()).done;){var y,j=p.value,M=l()(l()({},j),{},{label:j.name,value:j.id,genealogy:((y=f==null?void 0:f.genealogy)!==null&&y!==void 0?y:[]).concat(j.id)});j.pID===(f==null?void 0:f.id)?u.push(M):n.push(M)}}catch(W){r.e(W)}finally{r.f()}for(var C=[],b=0,D=u;b<D.length;b++){var B=D[b],N=c(n,B),q=N.matched,re=N.mismatched;C.push(l()(l()({},B),{},{children:q})),n=re}return{matched:C,mismatched:n}}m.Z=function(i){return c(i!=null?i:[]).matched}},22173:function(t,m,e){"use strict";var a=e(91252),l=e(71866),o=function(c,i){return!!(i&&(0,l.ZP)(i,"children",function(f){return(0,a.h)(c,f)}))};m.Z=o},3429:function(t,m,e){"use strict";e.d(m,{Ue:function(){return l},Vx:function(){return h},cn:function(){return o},pb:function(){return c},qn:function(){return i}});var a=e(44521),l=function(){for(var u=arguments.length,n=new Array(u),r=0;r<u;r++)n[r]=arguments[r];return a.iP.post.apply(a.iP,["user-center/role/create"].concat(n))},o=function(u){for(var n=arguments.length,r=new Array(n>1?n-1:0),p=1;p<n;p++)r[p-1]=arguments[p];return a.iP.delete.apply(a.iP,["user-center/role/remove/".concat(u)].concat(r))},h=function(){for(var u=arguments.length,n=new Array(u),r=0;r<u;r++)n[r]=arguments[r];return a.iP.put.apply(a.iP,["user-center/role/update"].concat(n))},c=function(){for(var u=arguments.length,n=new Array(u),r=0;r<u;r++)n[r]=arguments[r];return a.iP.get.apply(a.iP,["user-center/role/list"].concat(n))},i=function(){for(var u=arguments.length,n=new Array(u),r=0;r<u;r++)n[r]=arguments[r];return a.iP.get.apply(a.iP,["user-center/role/validate"].concat(n))}},75975:function(t,m,e){"use strict";e.r(m),e.d(m,{default:function(){return X}});var a=e(34412),l=e.n(a),o=e(69780),h=e.n(o),c=e(55354),i=e.n(c),f=e(94686),u=e(55977),n=e(97147),r=e(3429),p=e(7529),y=e.n(p),j=e(27139),M=e.n(j),C=e(80132),b=e(66022),D=e(48251),B=e(98034),N=e(81445),q=e(10130),re=e(30502),W=e(89246),$=e(22173),te=e(86493),fe=e(44256),ce=e(59042),pe=e.n(ce),T=e(93981),J=(0,te.WA)(function(S,x){var U,K,F,g,z=S.f,H=S.g,w=S.output,G=S.input,A=S.valuePropName,P=A===void 0?"value":A,v=z!=null?z:w,s=H!=null?H:G;return(0,T.cloneElement)(x,pe()({onChange:(0,te.qC)((0,te.wY)(x==null||(U=x.props)===null||U===void 0?void 0:U.onChange),(0,te.wY)(v))},P,(K=s==null?void 0:s(x==null||(F=x.props)===null||F===void 0?void 0:F[P]))!==null&&K!==void 0?K:x==null||(g=x.props)===null||g===void 0?void 0:g[P]))}),k={"tree-item":"tree-item___pjpEg","tree-item-tool":"tree-item-tool___AewDU"},ne=e(57530),V=e(71866),E=e(29541),Z=C.Z.Item,ee=b.Z.Link,ie=function(S){var x=S.formProps,U=S.modalProps,K=S.setModalProps,F=S.onSuccess,g=S.form,z=(U==null?void 0:U.title)==="\u7F16\u8F91",H=(0,re.a)(["user-center/perm/list","infinity"],function(){return(0,n.pb)({params:{limit:0}})});function w(){return G.apply(this,arguments)}function G(){return G=h()(l()().mark(function P(){var v,s;return l()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,g==null?void 0:g.validateFields();case 2:return v=d.sent,d.prev=3,K(function(R){return i()(i()({},R),{},{confirmLoading:!0})}),z?s=r.Vx:s=r.Ue,d.next=8,s(v);case 8:return d.next=10,F==null?void 0:F();case 10:K(function(R){return i()(i()({},R),{},{open:!1})}),g.resetFields();case 12:return d.prev=12,K(function(R){return i()(i()({},R),{},{confirmLoading:!1})}),d.finish(12);case 15:case"end":return d.stop()}},P,null,[[3,,12,15]])})),G.apply(this,arguments)}function A(P,v,s){return function(O){var d;O.stopPropagation();var R=[];(0,V.ZP)(s,"children",function(ve){return ve.id&&R.push(ve.id),!1});var I=(d=v.value)!==null&&d!==void 0?d:[];if(P==="ALL"){var L;v==null||(L=v.onChange)===null||L===void 0||L.call(v,Array.from(new Set([].concat(R,M()(I)))))}if(P==="REVERT"){var Y,_=new Set(M()(I)),le=y()(R),_e;try{for(le.s();!(_e=le.n()).done;){var me=_e.value;_.has(me)?_.delete(me):_.add(me)}}catch(ve){le.e(ve)}finally{le.f()}v==null||(Y=v.onChange)===null||Y===void 0||Y.call(v,Array.from(_))}}}return(0,E.jsxs)(q.Z,{formProps:i()({onFinish:w},x),modalProps:i()({onOk:w},U),children:[(0,E.jsx)(Z,{name:"name",label:"\u89D2\u8272\u540D",rules:[{required:!0}],children:(0,E.jsx)(D.Z,{placeholder:"\u8BF7\u8F93\u5165"})}),(0,E.jsx)(Z,{name:"id",label:"\u89D2\u8272\u6807\u8BC6",rules:[{required:!0},{validator:function(v,s){return z||!s?Promise.resolve():(0,r.qn)({params:{id:s},notify:!1})}},{pattern:/^[\w-]*$/,message:"\u4EC5\u5141\u8BB8\u82F1\u6587\u3001\u6570\u5B57\u548C\u201C-\u201D"}],children:(0,E.jsx)(D.Z,{placeholder:"\u8BF7\u8F93\u5165",disabled:z})}),(0,E.jsx)(Z,{name:"perms",label:"\u62E5\u6709\u6743\u9650",children:(0,te.qC)((0,fe.t)([J({f:function(v){return v==null?void 0:v.map(function(s){var O;return(O=s==null?void 0:s.value)!==null&&O!==void 0?O:s})}})]))((0,E.jsx)(ne.Z,{children:function(v){var s;return(0,E.jsx)(B.Z,i()({treeDefaultExpandAll:!0,placeholder:"\u8BF7\u9009\u62E9",fieldNames:{label:"label"},treeNodeLabelProp:"name",treeData:(0,V.oN)({children:(0,W.Z)(H==null||(s=H.data)===null||s===void 0?void 0:s.data)},"children",function(O){return i()(i()({},O),{},{label:(0,E.jsxs)("div",{className:k["tree-item"],children:[(0,E.jsx)("span",{children:O.name}),(0,E.jsx)("span",{className:k["tree-item-tool"],children:(0,E.jsxs)(N.Z,{children:[(0,E.jsx)(ee,{onClick:A("ALL",v,O),children:"\u5168\u9009"}),(0,E.jsx)(ee,{onClick:A("REVERT",v,O),children:"\u53CD\u9009"})]})})]})})}).children,filterTreeNode:$.Z,treeLine:{showLeafIcon:!1},showSearch:!0,multiple:!0,treeCheckable:!0,showCheckedStrategy:"SHOW_ALL",allowClear:!0,treeCheckStrictly:!0},v))}}))})]})},oe=e(37083),ae=e(48023),se=e(95563),de=e(37401),ue=b.Z.Link,Q=function(){var S=(0,re.a)(["user-center/perm/list","infinity"],function(){return(0,n.pb)({params:{limit:0}})}),x=(0,u.Z)(),U=x.actionRef,K=x.formRef,F=(0,oe.Z)(),g=[{dataIndex:"id",title:"id",hideInSearch:!0,copyable:!0},{dataIndex:"keyword",title:"\u5173\u952E\u5B57",hideInTable:!0},{dataIndex:"name",title:"\u89D2\u8272\u540D",hideInSearch:!0},{dataIndex:"perms",title:"\u62E5\u6709\u6743\u9650",width:200,ellipsis:{tooltip:!0,padding:17},hideInSearch:!0,render:function(P){var v,s;return P?(0,T.cloneElement)(P,{children:P==null||(v=P.props)===null||v===void 0||(s=v.children)===null||s===void 0?void 0:s.map(function(O,d,R){var I,L,Y;return"".concat(S==null||(I=S.data)===null||I===void 0||(L=I.data)===null||L===void 0||(Y=L.find(function(_){var le=_.id;return le===O}))===null||Y===void 0?void 0:Y.name).concat(d!==(R==null?void 0:R.length)-1?"\u3001":"")})}):null}},{dataIndex:"createAt",title:"\u521B\u5EFA\u65F6\u95F4",valueType:"dateTime",hideInSearch:!0},{dataIndex:"updateAt",title:"\u66F4\u65B0\u65F6\u95F4",valueType:"dateTime",hideInSearch:!0},{dataIndex:"id",title:"\u64CD\u4F5C",hideInSearch:!0,render:function(P,v){return(0,E.jsxs)(N.Z,{children:[(0,E.jsx)(ue,{onClick:H(v),children:"\u7F16\u8F91"}),(0,E.jsx)(ae.Z,{title:"\u64CD\u4F5C\u4E0D\u53EF\u9006\uFF0C\u8BF7\u4E8C\u6B21\u786E\u8BA4",onConfirm:w(P),children:(0,E.jsx)(ue,{children:"\u5220\u9664"})})]})}}];function z(){F.setModalProps(function(A){return i()(i()({},A),{},{open:!0,title:"\u65B0\u589E"})})}function H(A){return function(){F.setModalProps(function(P){return i()(i()({},P),{},{open:!0,title:"\u7F16\u8F91"})}),F.form.setFieldsValue(A)}}function w(A){return h()(l()().mark(function P(){var v,s;return l()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,d.next=3,(0,r.cn)(A,{notify:!0});case 3:(v=U.current)===null||v===void 0||(s=v.reload)===null||s===void 0||s.call(v),d.next=8;break;case 6:d.prev=6,d.t0=d.catch(0);case 8:case"end":return d.stop()}},P,null,[[0,6]])}))}function G(){var A,P;(A=U.current)===null||A===void 0||(P=A.reload)===null||P===void 0||P.call(A)}return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(ie,i()(i()({},F),{},{onSuccess:G})),(0,E.jsx)(f.ZP,{rowKey:"id",columns:g,actionRef:U,formRef:K,headerTitle:(0,E.jsx)(N.Z,{children:(0,E.jsx)(se.ZP,{icon:(0,E.jsx)(de.Z,{}),type:"primary",ghost:!0,onClick:z,children:"\u65B0\u589E"})}),queryOptions:{refetchOnWindowFocus:!1},request:function(){var A=h()(l()().mark(function P(v,s){var O,d,R;return l()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,r.pb)({params:{keyword:v==null?void 0:v.keyword,skip:((O=s==null?void 0:s.current)!==null&&O!==void 0?O:0)*((d=s==null?void 0:s.pageSize)!==null&&d!==void 0?d:0),limit:s==null?void 0:s.pageSize}});case 2:return R=L.sent,L.abrupt("return",{data:(R==null?void 0:R.data)||[],page:(s==null?void 0:s.current)||1,success:!0,total:(R==null?void 0:R.total)||0});case 4:case"end":return L.stop()}},P)}));return function(P,v){return A.apply(this,arguments)}}()})]})},X=Q},57530:function(t,m,e){"use strict";var a=e(50540),l=e.n(a),o=["children"],h=function(i){var f=i.children,u=l()(i,o);return f==null?void 0:f(u)};m.Z=h},55977:function(t,m,e){"use strict";var a=e(26434),l=a.Z.react.useRef;m.Z=function(o){var h=l(o==null?void 0:o.actionRef),c=l(o==null?void 0:o.formRef);return{actionRef:h,formRef:c}}},94686:function(t,m,e){"use strict";e.d(m,{ZP:function(){return pe}});var a=e(55354),l=e.n(a),o=e(50540),h=e.n(o),c=e(26434),i=e(21177),f=e(17674),u=e(34412),n=e.n(u),r=e(69780),p=e.n(r),y=e(50680),j=e.n(y),M=e(42092),C=c.Z.antd.Form,b=c.Z.react,D=b.useState,B=b.useRef,N=c.Z.reactQuery.useQuery,q=0;function re(T){var J,k=T.queryKey,ne=T.queryOptions,V=T.request,E=T.manualRequest,Z=T.pagination,ee=B(q++),ie=D(!E),oe=j()(ie,2),ae=oe[0],se=oe[1],de=C.useForm(),ue=j()(de,1),Q=ue[0],X=D(),S=j()(X,2),x=S[0],U=S[1],K=(0,M.Z)({onURLSearchChange:U,key:"tableState"}),F=K.setURLSearch,g=N(w(k),p()(n()().mark(function O(){var d,R,I,L=arguments;return n()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:for(d=L.length,R=new Array(d),I=0;I<d;I++)R[I]=L[I];if(V!=null){_.next=5;break}_.t0=void 0,_.next=14;break;case 5:return _.t1=V,_.next=8,Q.validateFields();case 8:_.t2=_.sent,_.t3=G(),_.t4=x==null?void 0:x[2],_.t5=x==null?void 0:x[1],_.t6=R,_.t0=(0,_.t1)(_.t2,_.t3,_.t4,_.t5,_.t6);case 14:return _.abrupt("return",_.t0);case 15:case"end":return _.stop()}},O)})),ae===!1?{enabled:ae}:ne),z=B(Q),H=B({reload:g.refetch,reset:Q.resetFields,reloadAndReset:A});function w(O){var d=O!=null?O:ee.current;return[].concat(d,x)}function G(){var O,d,R,I;return Z!==!1?l()(l()({},Z),{},{total:g==null||(O=g.data)===null||O===void 0?void 0:O.total,current:g==null||(d=g.data)===null||d===void 0?void 0:d.page,pageSize:(R=(I=Z==null?void 0:Z.pageSize)!==null&&I!==void 0?I:Z==null?void 0:Z.defaultPageSize)!==null&&R!==void 0?R:20,showQuickJumper:!0,showTotal:function(Y,_){return"\u5171 ".concat(Y," \u6761\u8BB0\u5F55 \u7B2C ").concat(_==null?void 0:_[0],"/").concat(_==null?void 0:_[1]," \u6761")}},x==null?void 0:x[0]):void 0}function A(){F(void 0),Q.resetFields(),g.refetch()}function P(){Q.resetFields(),g.refetch()}function v(){se(!0),F(void 0),g.refetch()}var s=function(d,R,I){return F([d,R,I])};return{formHandler:{onReset:P,onFinish:v,form:Q},tableHandler:{onChange:s,pagination:G(),dataSource:g==null||(J=g.data)===null||J===void 0?void 0:J.data,loading:g==null?void 0:g.isFetching},actionRef:H,formRef:z,current:ee.current}}var W=e(29878),$=e(29541),te=e(55977),fe=["columns","formRef","actionRef","formProps","queryKey","queryOptions","request","manualRequest","pagination","headerTitle","toolBarRender","children","tableCardRef"],ce=c.Z.antd.Card;function pe(T){var J=T.columns,k=T.formRef,ne=T.actionRef,V=T.formProps,E=T.queryKey,Z=T.queryOptions,ee=T.request,ie=T.manualRequest,oe=T.pagination,ae=T.headerTitle,se=T.toolBarRender,de=T.children,ue=T.tableCardRef,Q=h()(T,fe),X=re({queryKey:E,queryOptions:Z,request:ee,manualRequest:ie,pagination:oe}),S=X.formHandler,x=X.tableHandler,U=X.actionRef,K=X.formRef;return k&&(k.current=K.current),ne&&(ne.current=U.current),(0,$.jsxs)("div",{className:"".concat(W.Z.flex," ").concat(W.Z.column),children:[(0,$.jsx)(ce,{children:(0,$.jsx)(f.Z,{columns:J,formProps:l()(l()({},S),V)})}),de,(0,$.jsx)("div",{ref:ue,children:(0,$.jsx)(ce,{children:(0,$.jsxs)("div",{className:"".concat(W.Z.flex," ").concat(W.Z.column),children:[(0,$.jsxs)("div",{className:"".concat(W.Z.flex," ").concat(W.Z===null||W.Z===void 0?void 0:W.Z["space-between"]),children:[(0,$.jsx)("div",{children:ae}),(0,$.jsx)("div",{children:se})]}),(0,$.jsx)(i.ZP,l()(l()({size:"small",sticky:!0,columnEmptyText:"-",bordered:!0,columns:J},x),Q))]})})})]})}},44256:function(t,m,e){"use strict";e.d(m,{t:function(){return r}});var a=e(55354),l=e.n(a),o=e(27139),h=e.n(o),c=e(57530),i=e(26434),f=e(86493),u=e(29541),n=i.Z.react.cloneElement,r=(0,f.WA)(function(p,y){return(0,u.jsx)(c.Z,{children:function(M){var C,b;return f.qC.apply(void 0,h()(p))(n(y,l()(l()({},M),{},{onChange:(0,f.qC)((0,f.wY)((C=M==null?void 0:M.onChange)!==null&&C!==void 0?C:function(){}),(0,f.wY)(y==null||(b=y.props)===null||b===void 0?void 0:b.onChange))})))}})})},71866:function(t,m,e){"use strict";e.d(m,{ZP:function(){return f},oN:function(){return u}});var a=e(50680),l=e.n(a),o=e(80211),h=e.n(o),c=e(7529),i=e.n(c);function f(r,p,y,j){var M;if(y(r,j))return r;var C,b=(M=r==null?void 0:r[p])!==null&&M!==void 0?M:[],D=i()(b),B;try{for(D.s();!(B=D.n()).done;){var N=B.value;if(C=f(N,p,y,r),C)break}}catch(q){D.e(q)}finally{D.f()}return C}function u(r,p,y,j){for(var M,C=y(r,j),b=(M=C==null?void 0:C[p])!==null&&M!==void 0?M:[],D=0;D<(b==null?void 0:b.length);D++){var B=b==null?void 0:b[D];b[D]=u(B,p,y,C)}return C}function n(r,p){if(_typeof(r)!=="object"||r==null)return r;for(var y=Array.isArray(r)?[]:{},j=0,M=Object.entries(r);j<M.length;j++){var C=_slicedToArray(M[j],2),b=C[0],D=C[1];y[b]=n(p(D),p)}return y}},98027:function(t){function m(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.exports=m,t.exports.__esModule=!0,t.exports.default=t.exports},520:function(t,m,e){var a=e(78457),l=e(8703);function o(h,c,i){return l()?(t.exports=o=Reflect.construct.bind(),t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=o=function(u,n,r){var p=[null];p.push.apply(p,n);var y=Function.bind.apply(u,p),j=new y;return r&&a(j,r.prototype),j},t.exports.__esModule=!0,t.exports.default=t.exports),o.apply(null,arguments)}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},7529:function(t,m,e){var a=e(5582);function l(o,h){var c=typeof Symbol!="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!c){if(Array.isArray(o)||(c=a(o))||h&&o&&typeof o.length=="number"){c&&(o=c);var i=0,f=function(){};return{s:f,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(y){throw y},f}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,n=!1,r;return{s:function(){c=c.call(o)},n:function(){var y=c.next();return u=y.done,y},e:function(y){n=!0,r=y},f:function(){try{!u&&c.return!=null&&c.return()}finally{if(n)throw r}}}}t.exports=l,t.exports.__esModule=!0,t.exports.default=t.exports},36165:function(t,m,e){var a=e(7957),l=e(8703),o=e(10453);function h(c){var i=l();return function(){var u=a(c),n;if(i){var r=a(this).constructor;n=Reflect.construct(u,arguments,r)}else n=u.apply(this,arguments);return o(this,n)}}t.exports=h,t.exports.__esModule=!0,t.exports.default=t.exports},7957:function(t){function m(e){return t.exports=m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(l){return l.__proto__||Object.getPrototypeOf(l)},t.exports.__esModule=!0,t.exports.default=t.exports,m(e)}t.exports=m,t.exports.__esModule=!0,t.exports.default=t.exports},87910:function(t,m,e){var a=e(78457);function l(o,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(h&&h.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),h&&a(o,h)}t.exports=l,t.exports.__esModule=!0,t.exports.default=t.exports},8703:function(t){function m(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}t.exports=m,t.exports.__esModule=!0,t.exports.default=t.exports},10453:function(t,m,e){var a=e(80211).default,l=e(98027);function o(h,c){if(c&&(a(c)==="object"||typeof c=="function"))return c;if(c!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l(h)}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},78457:function(t){function m(e,a){return t.exports=m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,h){return o.__proto__=h,o},t.exports.__esModule=!0,t.exports.default=t.exports,m(e,a)}t.exports=m,t.exports.__esModule=!0,t.exports.default=t.exports}}]);
