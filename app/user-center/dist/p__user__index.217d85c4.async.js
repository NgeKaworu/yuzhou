(self.webpackChunkuser_center_=self.webpackChunkuser_center_||[]).push([[557],{3429:function(r,p,e){"use strict";e.d(p,{Ue:function(){return a},Vx:function(){return h},cn:function(){return t},pb:function(){return i},qn:function(){return m}});var u=e(44521),a=function(){for(var y=arguments.length,l=new Array(y),n=0;n<y;n++)l[n]=arguments[n];return u.iP.post.apply(u.iP,["user-center/role/create"].concat(l))},t=function(y){for(var l=arguments.length,n=new Array(l>1?l-1:0),S=1;S<l;S++)n[S-1]=arguments[S];return u.iP.delete.apply(u.iP,["user-center/role/remove/".concat(y)].concat(n))},h=function(){for(var y=arguments.length,l=new Array(y),n=0;n<y;n++)l[n]=arguments[n];return u.iP.put.apply(u.iP,["user-center/role/update"].concat(l))},i=function(){for(var y=arguments.length,l=new Array(y),n=0;n<y;n++)l[n]=arguments[n];return u.iP.get.apply(u.iP,["user-center/role/list"].concat(l))},m=function(){for(var y=arguments.length,l=new Array(y),n=0;n<y;n++)l[n]=arguments[n];return u.iP.get.apply(u.iP,["user-center/role/validate"].concat(l))}},97792:function(r,p,e){"use strict";e.r(p),e.d(p,{default:function(){return X}});var u=e(34412),a=e.n(u),t=e(69780),h=e.n(t),i=e(55354),m=e.n(i),b=e(94686),y=e(55977),l=e(3429),n=e(68564),S=e(80132),$=e(10130),W=e(30502),G=e(23663),Q=e(86493),Y=e(44256),w=e(93981),x=e(29541),ne=(0,Q.WA)(function(s){var D=s==null?void 0:s.props,C=D.options;function U(){return C==null?void 0:C.reduce(function(P,v){var E,I;return v!=null&&v.disabled||s!=null&&(E=s.props)!==null&&E!==void 0&&(I=E.value)!==null&&I!==void 0&&I.includes(v==null?void 0:v.value)?P:P==null?void 0:P.concat(v==null?void 0:v.value)},[])}function M(){var P,v,E,I,R,d;s==null||(P=s.props)===null||P===void 0||(v=P.onChange)===null||v===void 0||v.call(P,(E=(I=s==null||(R=s.props)===null||R===void 0?void 0:R.value)!==null&&I!==void 0?I:[])===null||E===void 0?void 0:E.concat((d=U())!==null&&d!==void 0?d:[]))}function L(){var P,v;s==null||(P=s.props)===null||P===void 0||(v=P.onChange)===null||v===void 0||v.call(P,U())}return(0,w.cloneElement)(s,{mode:"multiple",dropdownRender:function(v){return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",margin:"8px 12px"},children:[(0,x.jsx)("a",{onClick:M,children:"\u5168\u9009"}),(0,x.jsx)("a",{onClick:L,children:"\u53CD\u9009"})]}),v]})}})}),V=e(96214),k=S.Z.Item,_=function(s){var D,C,U=s.formProps,M=s.modalProps,L=s.setModalProps,P=s.onSuccess,v=s.form,E=(M==null?void 0:M.title)==="\u7F16\u8F91",I=(0,W.a)(["user-center/role/list","infinity"],function(){return(0,l.pb)({params:{limit:0}})}),R=(D=I.data)===null||D===void 0||(C=D.data)===null||C===void 0?void 0:C.map(function(o){return{label:o.name,value:o.id}});function d(){return g.apply(this,arguments)}function g(){return g=h()(a()().mark(function o(){var F,j;return a()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,v==null?void 0:v.validateFields();case 2:return F=c.sent,c.prev=3,L(function(T){return m()(m()({},T),{},{confirmLoading:!0})}),E?j=n.Vx:j=n.Ue,c.next=8,j(F);case 8:return c.next=10,P==null?void 0:P();case 10:L(function(T){return m()(m()({},T),{},{open:!1})}),v.resetFields();case 12:return c.prev=12,L(function(T){return m()(m()({},T),{},{confirmLoading:!1})}),c.finish(12);case 15:case"end":return c.stop()}},o,null,[[3,,12,15]])})),g.apply(this,arguments)}return(0,x.jsxs)($.Z,{formProps:m()({onFinish:d},U),modalProps:m()({onOk:d},M),children:[(0,x.jsx)(k,{name:"id",hidden:!0,children:(0,x.jsx)("input",{disabled:!0})}),(0,x.jsx)(V.VG,{}),(0,x.jsx)(V.GT,{disabled:E,checkout:!E}),(0,x.jsx)(V.cW,{disabled:E}),(0,x.jsx)(k,{name:"roles",label:"\u62E5\u6709\u6743\u9650",children:(0,Q.qC)((0,Y.t)([ne]))((0,x.jsx)(G.Z,{allowClear:!0,options:R}))})]})},Z=e(37083),ie=e(66022),ee=e(81445),re=e(48023),oe=e(95563),O=e(37401),H=ie.Z.Link,J=function(){var s=(0,W.a)(["user-center/perm/list","infinity"],function(){return(0,l.pb)({params:{limit:0}})}),D=(0,y.Z)(),C=D.actionRef,U=D.formRef,M=(0,Z.Z)(),L=[{dataIndex:"keyword",title:"\u5173\u952E\u5B57",hideInTable:!0},{title:"\u90AE\u7BB1",dataIndex:"email",hideInSearch:!0,copyable:!0},{title:"\u6635\u79F0",dataIndex:"name",hideInSearch:!0,copyable:!0},{dataIndex:"roles",title:"\u62E5\u6709\u89D2\u8272",width:200,ellipsis:{tooltip:!0,padding:17},hideInSearch:!0,render:function(d){var g,o;return d?(0,w.cloneElement)(d,{children:d==null||(g=d.props)===null||g===void 0||(o=g.children)===null||o===void 0?void 0:o.map(function(F,j,A){var c,T,q;return"".concat(s==null||(c=s.data)===null||c===void 0||(T=c.data)===null||T===void 0||(q=T.find(function(ae){var te=ae.id;return te===F}))===null||q===void 0?void 0:q.name).concat(j!==A.length-1?"\u3001":"")})}):null}},{dataIndex:"createAt",title:"\u521B\u5EFA\u65F6\u95F4",valueType:"dateTime",hideInSearch:!0},{dataIndex:"updateAt",title:"\u66F4\u65B0\u65F6\u95F4",valueType:"dateTime",hideInSearch:!0},{dataIndex:"id",title:"\u64CD\u4F5C",hideInSearch:!0,render:function(d,g){return(0,x.jsxs)(ee.Z,{children:[(0,x.jsx)(H,{onClick:v(g),children:"\u7F16\u8F91"}),(0,x.jsx)(re.Z,{title:"\u64CD\u4F5C\u4E0D\u53EF\u9006\uFF0C\u8BF7\u4E8C\u6B21\u786E\u8BA4",onConfirm:E(d),children:(0,x.jsx)(H,{children:"\u5220\u9664"})})]})}}];function P(){M.setModalProps(function(R){return m()(m()({},R),{},{open:!0,title:"\u65B0\u589E"})})}function v(R){return function(){M.setModalProps(function(d){return m()(m()({},d),{},{open:!0,title:"\u7F16\u8F91"})}),M.form.setFieldsValue(R)}}function E(R){return h()(a()().mark(function d(){var g,o;return a()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.prev=0,j.next=3,(0,n.cn)(R,{notify:!0});case 3:(g=C.current)===null||g===void 0||(o=g.reload)===null||o===void 0||o.call(g),j.next=8;break;case 6:j.prev=6,j.t0=j.catch(0);case 8:case"end":return j.stop()}},d,null,[[0,6]])}))}function I(){var R,d;(R=C.current)===null||R===void 0||(d=R.reload)===null||d===void 0||d.call(R)}return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(_,m()(m()({},M),{},{onSuccess:I})),(0,x.jsx)(b.ZP,{rowKey:"id",columns:L,actionRef:C,formRef:U,headerTitle:(0,x.jsx)(ee.Z,{children:(0,x.jsx)(oe.ZP,{icon:(0,x.jsx)(O.Z,{}),type:"primary",ghost:!0,onClick:P,children:"\u65B0\u589E"})}),queryOptions:{refetchOnWindowFocus:!1},request:function(){var R=h()(a()().mark(function d(g,o){var F,j,A;return a()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,(0,n.pb)({params:{keyword:g==null?void 0:g.keyword,skip:((F=o==null?void 0:o.current)!==null&&F!==void 0?F:0)*((j=o==null?void 0:o.pageSize)!==null&&j!==void 0?j:0),limit:o==null?void 0:o.pageSize}});case 2:return A=T.sent,T.abrupt("return",{data:(A==null?void 0:A.data)||[],page:(o==null?void 0:o.current)||1,success:!0,total:(A==null?void 0:A.total)||0});case 4:case"end":return T.stop()}},d)}));return function(d,g){return R.apply(this,arguments)}}()})]})},X=J},57530:function(r,p,e){"use strict";var u=e(50540),a=e.n(u),t=["children"],h=function(m){var b=m.children,y=a()(m,t);return b==null?void 0:b(y)};p.Z=h},55977:function(r,p,e){"use strict";var u=e(26434),a=u.Z.react.useRef;p.Z=function(t){var h=a(t==null?void 0:t.actionRef),i=a(t==null?void 0:t.formRef);return{actionRef:h,formRef:i}}},94686:function(r,p,e){"use strict";e.d(p,{ZP:function(){return oe}});var u=e(55354),a=e.n(u),t=e(50540),h=e.n(t),i=e(26434),m=e(21177),b=e(17674),y=e(34412),l=e.n(y),n=e(69780),S=e.n(n),$=e(50680),W=e.n($),G=e(42092),Q=i.Z.antd.Form,Y=i.Z.react,w=Y.useState,x=Y.useRef,ne=i.Z.reactQuery.useQuery,V=0;function k(O){var H,J=O.queryKey,X=O.queryOptions,s=O.request,D=O.manualRequest,C=O.pagination,U=x(V++),M=w(!D),L=W()(M,2),P=L[0],v=L[1],E=Q.useForm(),I=W()(E,1),R=I[0],d=w(),g=W()(d,2),o=g[0],F=g[1],j=(0,G.Z)({onURLSearchChange:F,key:"tableState"}),A=j.setURLSearch,c=ne(ae(J),S()(l()().mark(function z(){var B,N,K,ue=arguments;return l()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:for(B=ue.length,N=new Array(B),K=0;K<B;K++)N[K]=ue[K];if(s!=null){f.next=5;break}f.t0=void 0,f.next=14;break;case 5:return f.t1=s,f.next=8,R.validateFields();case 8:f.t2=f.sent,f.t3=te(),f.t4=o==null?void 0:o[2],f.t5=o==null?void 0:o[1],f.t6=N,f.t0=(0,f.t1)(f.t2,f.t3,f.t4,f.t5,f.t6);case 14:return f.abrupt("return",f.t0);case 15:case"end":return f.stop()}},z)})),P===!1?{enabled:P}:X),T=x(R),q=x({reload:c.refetch,reset:R.resetFields,reloadAndReset:se});function ae(z){var B=z!=null?z:U.current;return[].concat(B,o)}function te(){var z,B,N,K;return C!==!1?a()(a()({},C),{},{total:c==null||(z=c.data)===null||z===void 0?void 0:z.total,current:c==null||(B=c.data)===null||B===void 0?void 0:B.page,pageSize:(N=(K=C==null?void 0:C.pageSize)!==null&&K!==void 0?K:C==null?void 0:C.defaultPageSize)!==null&&N!==void 0?N:20,showQuickJumper:!0,showTotal:function(le,f){return"\u5171 ".concat(le," \u6761\u8BB0\u5F55 \u7B2C ").concat(f==null?void 0:f[0],"/").concat(f==null?void 0:f[1]," \u6761")}},o==null?void 0:o[0]):void 0}function se(){A(void 0),R.resetFields(),c.refetch()}function de(){R.resetFields(),c.refetch()}function ce(){v(!0),A(void 0),c.refetch()}var ve=function(B,N,K){return A([B,N,K])};return{formHandler:{onReset:de,onFinish:ce,form:R},tableHandler:{onChange:ve,pagination:te(),dataSource:c==null||(H=c.data)===null||H===void 0?void 0:H.data,loading:c==null?void 0:c.isFetching},actionRef:q,formRef:T,current:U.current}}var _=e(29878),Z=e(29541),ie=e(55977),ee=["columns","formRef","actionRef","formProps","queryKey","queryOptions","request","manualRequest","pagination","headerTitle","toolBarRender","children","tableCardRef"],re=i.Z.antd.Card;function oe(O){var H=O.columns,J=O.formRef,X=O.actionRef,s=O.formProps,D=O.queryKey,C=O.queryOptions,U=O.request,M=O.manualRequest,L=O.pagination,P=O.headerTitle,v=O.toolBarRender,E=O.children,I=O.tableCardRef,R=h()(O,ee),d=k({queryKey:D,queryOptions:C,request:U,manualRequest:M,pagination:L}),g=d.formHandler,o=d.tableHandler,F=d.actionRef,j=d.formRef;return J&&(J.current=j.current),X&&(X.current=F.current),(0,Z.jsxs)("div",{className:"".concat(_.Z.flex," ").concat(_.Z.column),children:[(0,Z.jsx)(re,{children:(0,Z.jsx)(b.Z,{columns:H,formProps:a()(a()({},g),s)})}),E,(0,Z.jsx)("div",{ref:I,children:(0,Z.jsx)(re,{children:(0,Z.jsxs)("div",{className:"".concat(_.Z.flex," ").concat(_.Z.column),children:[(0,Z.jsxs)("div",{className:"".concat(_.Z.flex," ").concat(_.Z===null||_.Z===void 0?void 0:_.Z["space-between"]),children:[(0,Z.jsx)("div",{children:P}),(0,Z.jsx)("div",{children:v})]}),(0,Z.jsx)(m.ZP,a()(a()({size:"small",sticky:!0,columnEmptyText:"-",bordered:!0,columns:H},o),R))]})})})]})}},44256:function(r,p,e){"use strict";e.d(p,{t:function(){return n}});var u=e(55354),a=e.n(u),t=e(27139),h=e.n(t),i=e(57530),m=e(26434),b=e(86493),y=e(29541),l=m.Z.react.cloneElement,n=(0,b.WA)(function(S,$){return(0,y.jsx)(i.Z,{children:function(G){var Q,Y;return b.qC.apply(void 0,h()(S))(l($,a()(a()({},G),{},{onChange:(0,b.qC)((0,b.wY)((Q=G==null?void 0:G.onChange)!==null&&Q!==void 0?Q:function(){}),(0,b.wY)($==null||(Y=$.props)===null||Y===void 0?void 0:Y.onChange))})))}})})},98027:function(r){function p(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.exports=p,r.exports.__esModule=!0,r.exports.default=r.exports},520:function(r,p,e){var u=e(78457),a=e(8703);function t(h,i,m){return a()?(r.exports=t=Reflect.construct.bind(),r.exports.__esModule=!0,r.exports.default=r.exports):(r.exports=t=function(y,l,n){var S=[null];S.push.apply(S,l);var $=Function.bind.apply(y,S),W=new $;return n&&u(W,n.prototype),W},r.exports.__esModule=!0,r.exports.default=r.exports),t.apply(null,arguments)}r.exports=t,r.exports.__esModule=!0,r.exports.default=r.exports},7529:function(r,p,e){var u=e(5582);function a(t,h){var i=typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=u(t))||h&&t&&typeof t.length=="number"){i&&(t=i);var m=0,b=function(){};return{s:b,n:function(){return m>=t.length?{done:!0}:{done:!1,value:t[m++]}},e:function($){throw $},f:b}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y=!0,l=!1,n;return{s:function(){i=i.call(t)},n:function(){var $=i.next();return y=$.done,$},e:function($){l=!0,n=$},f:function(){try{!y&&i.return!=null&&i.return()}finally{if(l)throw n}}}}r.exports=a,r.exports.__esModule=!0,r.exports.default=r.exports},36165:function(r,p,e){var u=e(7957),a=e(8703),t=e(10453);function h(i){var m=a();return function(){var y=u(i),l;if(m){var n=u(this).constructor;l=Reflect.construct(y,arguments,n)}else l=y.apply(this,arguments);return t(this,l)}}r.exports=h,r.exports.__esModule=!0,r.exports.default=r.exports},7957:function(r){function p(e){return r.exports=p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},r.exports.__esModule=!0,r.exports.default=r.exports,p(e)}r.exports=p,r.exports.__esModule=!0,r.exports.default=r.exports},87910:function(r,p,e){var u=e(78457);function a(t,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(h&&h.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),h&&u(t,h)}r.exports=a,r.exports.__esModule=!0,r.exports.default=r.exports},8703:function(r){function p(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}r.exports=p,r.exports.__esModule=!0,r.exports.default=r.exports},10453:function(r,p,e){var u=e(80211).default,a=e(98027);function t(h,i){if(i&&(u(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a(h)}r.exports=t,r.exports.__esModule=!0,r.exports.default=r.exports},78457:function(r){function p(e,u){return r.exports=p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,h){return t.__proto__=h,t},r.exports.__esModule=!0,r.exports.default=r.exports,p(e,u)}r.exports=p,r.exports.__esModule=!0,r.exports.default=r.exports}}]);
