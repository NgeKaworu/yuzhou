"use strict";(self.webpackChunkuser_center_=self.webpackChunkuser_center_||[]).push([[570],{2508:function(F,f,n){n.r(f);var A=n(34412),O=n.n(A),T=n(69780),m=n.n(T),y=n(50680),U=n.n(y),v=n(7616),p=n(80132),s=n(66022),b=n(41896),j=n(95563),E=n(96214),_=n(44521),r=n(29895),o=n(46156),e=n(29541),u=p.Z.Item,t=s.Z.Link,i=s.Z.Title,h=new Map([["register",{title:"\u6CE8\u518C"}],["login",{title:"\u767B\u5F55"}],["forget-pwd",{title:"\u91CD\u7F6E\u5BC6\u7801"}]]);f.default=function(){var d,c,M,C=(0,v.UO)(),a=C.entry,g=(0,v.s0)(),P=p.Z.useForm(),K=U()(P,1),z=K[0],I=(0,r.D)(function(D){return _.iP.post("user-center/".concat(a),D)});["register","login","forget-pwd"].includes(a)||g.replace("/");function B(D){return function(){return g.replace("/".concat(D))}}var Z=function(){var D=m()(O()().mark(function L(W){var R;return O()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,I.mutateAsync(W);case 3:R=l.sent,window.localStorage.setItem("token",R==null?void 0:R.data),location.replace("/"),l.next=11;break;case 8:l.prev=8,l.t0=l.catch(0),console.error(l.t0);case 11:case"end":return l.stop()}},L,null,[[0,8]])}));return function(W){return D.apply(this,arguments)}}();return(0,e.jsx)("div",{className:o.Z.content,children:(0,e.jsx)(b.Z,{title:(d=h.get(a))===null||d===void 0?void 0:d.title,children:(0,e.jsx)(p.Z,{form:z,layout:"vertical",onFinish:Z,onFinishFailed:console.warn,children:(0,e.jsxs)("div",{className:(c=[o.Z["space-between"],o.Z.column,o.Z.card])===null||c===void 0?void 0:c.join(" "),children:[(0,e.jsxs)("div",{children:[a==="register"&&(0,e.jsx)(E.VG,{}),(0,e.jsx)(E.GT,{checkout:a==="register"}),a!=="login"&&(0,e.jsx)(E.UG,{}),(0,e.jsx)(E.cW,{}),a!=="login"&&(0,e.jsx)(E.tf,{})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(u,{noStyle:!0,children:(0,e.jsx)(j.ZP,{htmlType:"submit",type:"primary",size:"large",block:!0,loading:I.isLoading,children:(M=h.get(a))===null||M===void 0?void 0:M.title})}),(0,e.jsx)(u,{children:(0,e.jsxs)("div",{className:o.Z["space-between"],children:[a!=="login"&&(0,e.jsx)(t,{onClick:B("login"),children:"\u5DF2\u6709\u8D26\u53F7\uFF1F\u73B0\u5728\u767B\u5F55\uFF01"}),a!=="register"&&(0,e.jsx)(t,{onClick:B("register"),children:"\u6CA1\u6709\u8D26\u53F7\uFF1F\u73B0\u5728\u6CE8\u518C\uFF01"}),a!=="forget-pwd"&&(0,e.jsx)(t,{onClick:B("forget-pwd"),children:"\u5FD8\u8BB0\u5BC6\u7801\uFF1F"})]})})]})]})})})})}},44521:function(F,f,n){n.d(f,{iP:function(){return s}});var A=n(59042),O=n.n(A),T=n(55354),m=n.n(T),y=n(26434),U=n(28983),v=y.Z.antd.message,p={200:"\u64CD\u4F5C\u6210\u529F\u3002",201:"\u65B0\u5EFA\u6216\u4FEE\u6539\u6570\u636E\u6210\u529F\u3002",202:"\u4E00\u4E2A\u8BF7\u6C42\u5DF2\u7ECF\u8FDB\u5165\u540E\u53F0\u6392\u961F\uFF08\u5F02\u6B65\u4EFB\u52A1\uFF09\u3002",204:"\u5220\u9664\u6570\u636E\u6210\u529F\u3002",400:"\u53D1\u51FA\u7684\u8BF7\u6C42\u6709\u9519\u8BEF\uFF0C\u670D\u52A1\u5668\u6CA1\u6709\u8FDB\u884C\u65B0\u5EFA\u6216\u4FEE\u6539\u6570\u636E\u7684\u64CD\u4F5C\u3002",401:"\u7528\u6237\u6CA1\u6709\u6743\u9650\uFF08\u4EE4\u724C\u3001\u7528\u6237\u540D\u3001\u5BC6\u7801\u9519\u8BEF\uFF09\u3002",403:"\u7528\u6237\u5F97\u5230\u6388\u6743\uFF0C\u4F46\u662F\u8BBF\u95EE\u662F\u88AB\u7981\u6B62\u7684\u3002",404:"\u53D1\u51FA\u7684\u8BF7\u6C42\u9488\u5BF9\u7684\u662F\u4E0D\u5B58\u5728\u7684\u8BB0\u5F55\uFF0C\u670D\u52A1\u5668\u6CA1\u6709\u8FDB\u884C\u64CD\u4F5C\u3002",405:"\u8BF7\u6C42\u65B9\u5F0F\u4E0D\u5BF9",406:"\u8BF7\u6C42\u7684\u683C\u5F0F\u4E0D\u53EF\u5F97\u3002",410:"\u8BF7\u6C42\u7684\u8D44\u6E90\u88AB\u6C38\u4E45\u5220\u9664\uFF0C\u4E14\u4E0D\u4F1A\u518D\u5F97\u5230\u7684\u3002",422:"\u5F53\u521B\u5EFA\u4E00\u4E2A\u5BF9\u8C61\u65F6\uFF0C\u53D1\u751F\u4E00\u4E2A\u9A8C\u8BC1\u9519\u8BEF\u3002",500:"\u670D\u52A1\u5668\u53D1\u751F\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u670D\u52A1\u5668\u3002",502:"\u7F51\u5173\u9519\u8BEF\u3002",503:"\u670D\u52A1\u4E0D\u53EF\u7528\uFF0C\u670D\u52A1\u5668\u6682\u65F6\u8FC7\u8F7D\u6216\u7EF4\u62A4\u3002",504:"\u7F51\u5173\u8D85\u65F6\u3002"},s=U.Z.create({baseURL:"/api/",timeout:1e4,timeoutErrorMessage:"\u8FDE\u63A5\u8D85\u65F6\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u540E\u518D\u8BD5"});s.interceptors.request.use(function(_){return _.headers.setAuthorization("Bearer ".concat(localStorage.getItem("token"))),_}),s.interceptors.response.use(function(_){var r,o;if(_!=null&&(r=_.data)!==null&&r!==void 0&&r.ok)return _;var e={config:_.config,isAxiosError:!1,toJSON:function(){return{}},response:_,request:_.request,message:_==null||(o=_.data)===null||o===void 0?void 0:o.errMsg,name:"biz error"};throw e}),s.interceptors.response.use(function(_){var r,o,e=_.data,u=_.config;if((r=[!0,"success"])!==null&&r!==void 0&&r.includes((o=u==null?void 0:u.notify)!==null&&o!==void 0?o:!1)){var t=(e==null?void 0:e.message)||"\u64CD\u4F5C\u6210\u529F";v.success({content:t,key:t})}return e}),s.interceptors.response.use(void 0,function(_){var r,o=_!=null?_:{},e=o.response,u=o.message,t=o.config,i=t!=null?t:{},h=i.reAuth,d=i.notify,c=i.sneakyThrows;if((e==null?void 0:e.status)===401)return h?b(t):v.warning({key:e.status,content:"\u8BF7\u5148\u767B\u5F55",onClose:function(){var g,P;localStorage.removeItem("token"),(g=location.pathname)!==null&&g!==void 0&&(P=g.toLocaleLowerCase())!==null&&P!==void 0&&P.includes("/user-center/login/")||location.replace("/user-center/login/")}});if((r=[!0,"fail"])!==null&&r!==void 0&&r.includes(d!=null?d:!0)){var M=u.match("Network Error")&&"\u7F51\u7EDC\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u3002",C=M||u||p[e==null?void 0:e.status]||"\u672A\u77E5\u9519\u8BEF";v.error({key:C,content:C})}if(c)return e;throw _});function b(_){return s.get("/uc/oauth2/refresh",{reAuth:!1,notify:"fail",params:{token:localStorage.getStorage("refresh_token")}}).then(function(r){return localStorage.setItem("token",r.data.token),localStorage.setItem("refresh_token",r.data.refresh_token),s(m()(m()({},_),{},{reAuth:!1}))})}var j=["query","mutation"],E=j.reduce(function(_,r){return m()(m()({},_),{},O()({},r,function(o,e){return function(){for(var u=arguments.length,t=new Array(u),i=0;i<u;i++)t[i]=arguments[i];return s.post(o,m()({query:"".concat(r," {").concat(t[0].reduce(function(h,d,c){return h+d+(t[c+1]||"")},""),"}")},e))}}))},{})},46156:function(F,f){f.Z={content:"content___dVUOr","space-between":"space-between___JTlMr",column:"column___Sgdz5",card:"card___Jkky6",title:"title___TMYMa"}}}]);
