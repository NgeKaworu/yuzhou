"use strict";(self.webpackChunkstock_=self.webpackChunkstock_||[]).push([[315],{70477:function(mn,_,n){n.r(_),n.d(_,{default:function(){return hn}});var G=n(34412),B=n.n(G),V=n(69780),c=n.n(V),Q=n(55354),u=n.n(Q),H=n(50680),T=n.n(H),Z=n(25642),L=n(79072),J=n(91993),v=n(72754),j=n(37083),f=n(32297),R=n(15289),h=n(81445),I=n(48023),M=n(41896),P=n(56918),N=n(95563),y=n(88235),O=n(37401),U=n(30502),C=n(93981),dn=n(68996),r=n(7616),p=n(66283),a=n(67381),e=n(29541),b=f.Z.Text,X=f.Z.Link,m=R.Z.Item,fn=function(){var Y,k,w,q,nn,x=(0,j.Z)(),en=(0,j.Z)(),pn=(0,r.UO)(),l=pn.code,xn=(0,C.useState)([1,10]),cn=T()(xn,2),vn=T()(cn[0],2),tn=vn[0],D=vn[1],En=cn[1];(0,C.useEffect)(function(){l&&(document.title=l)},[l]);var K=(0,U.a)(["position-detail",l],function(){return(0,Z.lA)(l,{params:{omitempty:!1}})},{enabled:!!l,onSuccess:function(o){var i,t;if((i=o.data)!==null&&i!==void 0&&(t=i.stock)!==null&&t!==void 0&&t.name){var S,ln;document.title="".concat((S=o.data)===null||S===void 0?void 0:S.stock.code," - ").concat((ln=o.data)===null||ln===void 0?void 0:ln.stock.name)}}}),E=(0,U.a)(["exchange-list",l,tn,D],function(){return(0,L.pb)(l,{params:{limit:D,skip:(tn-1)*(D!=null?D:10)}})},{enabled:!!l}),on=function(){K.refetch(),E.refetch()},jn={showSizeChanger:!0,current:tn,pageSize:D,total:E==null||(Y=E.data)===null||Y===void 0?void 0:Y.total,onChange:function(){for(var o=arguments.length,i=new Array(o),t=0;t<o;t++)i[t]=arguments[t];return En(i)}},Pn=[{dataIndex:"createAt",title:"\u4EA4\u6613\u65F6\u95F4",valueType:"dateTime"},{dataIndex:"currentCapital",title:"\u6210\u4EA4\u91D1\u989D",render:function(o,i){var t=i.currentShare,S=i.transactionPrice;return"\xA5".concat((0,a.EU)(t,S))}},{dataIndex:"transactionPrice",title:"\u6210\u4EA4\u4EF7\u683C",prefix:"\xA5"},{dataIndex:"currentShare",title:"\u6210\u4EA4\u6570\u91CF"},{dataIndex:"currentDividend",title:"\u672C\u6B21\u6D3E\u606F",prefix:"\xA5"},{dataIndex:"id",title:"\u64CD\u4F5C",render:function(o,i){return(0,e.jsxs)(h.Z,{children:[(0,e.jsx)(X,{onClick:Dn(i),children:"\u7F16\u8F91"}),(0,e.jsx)(I.Z,{title:"\u64CD\u4F5C\u4E0D\u53EF\u9006\uFF0C\u8BF7\u4E8C\u6B21\u786E\u8BA4",onConfirm:Fn(o),children:(0,e.jsx)(X,{children:"\u5220\u9664"})})]})}}];function Cn(){x.setModalProps(function(s){return u()(u()({},s),{},{open:!0,title:"\u65B0\u589E"})}),x.form.setFieldsValue({code:l}),x.setData({code:l})}function Dn(s){return function(){x.setModalProps(function(o){return u()(u()({},o),{},{open:!0,title:"\u7F16\u8F91"})}),x.form.setFieldsValue(s),x.setData({code:l})}}function Fn(s){return c()(B()().mark(function o(){return B()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,L.cn)(s,{notify:!0});case 3:on(),t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}},o,null,[[0,6]])}))}function gn(){on()}function Bn(){on()}function In(s){return function(){en.setModalProps(function(o){return u()(u()({},o),{},{open:!0,title:"\u7F16\u8F91"})}),en.form.setFieldsValue(s)}}var W=K==null||(k=K.data)===null||k===void 0?void 0:k.data,F=W!=null?W:{},d=F.stock,z=F.totalShare,$=F.totalCapital,an=F.totalDividend,A=F.stopProfit,rn=F.stopLoss,sn=(0,a.EU)(d==null?void 0:d.currentPrice,z).toFixed(3),un=(0,a.oO)(sn,-$,an).toFixed(3),g=((0,a.tA)(un,$)*100).toFixed(3);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(J.Z,u()(u()({},x),{},{onSuccess:gn})),(0,e.jsx)(v.Z,u()(u()({},en),{},{onSuccess:Bn})),(0,e.jsx)(M.Z,{size:"small",children:(0,e.jsxs)(h.Z,{direction:"vertical",style:{width:"100%"},children:[(0,e.jsxs)(R.Z,{title:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("b",{children:"\u80A1\u7968\u540D\u79F0: "})," ",d&&(0,e.jsx)(p.Z,{stock:d})]}),bordered:!0,extra:(0,e.jsx)(X,{onClick:In(W),children:"\u7F16\u8F91"}),children:[(0,e.jsx)(m,{label:"\u73B0\u4EF7",children:(d==null?void 0:d.currentPrice)!==void 0?"\xA5".concat(d==null?void 0:d.currentPrice):"-"}),(0,e.jsx)(m,{label:"\u5E02\u503C",children:sn!==void 0?"\xA5".concat(sn):"-"}),(0,e.jsx)(m,{label:"\u603B\u6295\u5165",children:$!==void 0?"\xA5".concat($):"-"}),(0,e.jsx)(m,{label:"\u603B\u8425\u6536",children:(0,e.jsx)(b,{type:(0,a.Iw)(un)>0?"success":"danger",children:(w="\xA5".concat(un))!==null&&w!==void 0?w:"-"})}),(0,e.jsx)(m,{label:"\u603B\u80A1\u4EFD",children:z!=null?z:"-"}),(0,e.jsx)(m,{label:"\u603B\u6D3E\u606F",children:an!==void 0?"\xA5".concat(an):"-"}),(0,e.jsxs)(m,{label:"\u8425\u6536\u7387",children:[((0,a.Iw)(g)>=(0,a.Iw)(A)||(0,a.Iw)(g)<=(0,a.Iw)(rn))&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(P.Z,{title:"\u8D85\u8FC7".concat((0,a.Iw)(g)>=(0,a.Iw)(A)?"\u6B62\u76C8":"\u6B62\u635F","\u70B9\uFF0C\u8BF7\u53CA\u65F6").concat((0,a.Iw)(g)>=(0,a.Iw)(A)?"\u6B62\u76C8":"\u6B62\u635F"),children:(0,e.jsx)(y.Z,{})})," "]}),(0,e.jsx)(b,{type:(0,a.Iw)(g)>0?"success":"danger",children:(q="".concat(g,"%"))!==null&&q!==void 0?q:"-"})]}),(0,e.jsx)(m,{label:"\u6B62\u76C8\u70B9",children:(0,e.jsx)(b,{type:"success",children:A?"".concat(A,"%"):"-"})}),(0,e.jsx)(m,{label:"\u6B62\u635F\u70B9",children:(0,e.jsx)(b,{type:"danger",children:rn?"".concat(rn,"%"):"-"})})]}),(0,e.jsx)(h.Z,{children:(0,e.jsx)(N.ZP,{icon:(0,e.jsx)(O.Z,{}),type:"primary",ghost:!0,onClick:Cn,children:"\u65B0\u589E"})}),(0,e.jsx)(dn.ZP,{columnEmptyText:"-",columns:Pn,scroll:{x:"max-content"},rowKey:function(o){return o.id},dataSource:E==null||(nn=E.data)===null||nn===void 0?void 0:nn.data,pagination:jn})]})})]})},hn=fn},72754:function(mn,_,n){var G=n(34412),B=n.n(G),V=n(55354),c=n.n(V),Q=n(69780),u=n.n(Q),H=n(55898),T=n(32426),Z=n(56303),L=n(10130),J=n(25642),v=n(29541),j=H.Z.Item;_.Z=function(f){var R=f.formProps,h=f.modalProps,I=f.setModalProps,M=f.onSuccess,P=f.form,N=(h==null?void 0:h.title)==="\u7F16\u8F91";function y(){return O.apply(this,arguments)}function O(){return O=u()(B()().mark(function U(){var C;return B()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,P==null?void 0:P.validateFields();case 2:if(C=r.sent,r.prev=3,I(function(p){return c()(c()({},p),{},{confirmLoading:!0})}),!N){r.next=8;break}return r.next=8,(0,J.Vx)(C.code,C);case 8:return r.next=10,M==null?void 0:M();case 10:I(function(p){return c()(c()({},p),{},{open:!1})}),P.resetFields();case 12:return r.prev=12,I(function(p){return c()(c()({},p),{},{confirmLoading:!1})}),r.finish(12);case 15:case"end":return r.stop()}},U,null,[[3,,12,15]])})),O.apply(this,arguments)}return(0,v.jsxs)(L.Z,{formProps:c()({onFinish:y},R),modalProps:c()({onOk:y},h),children:[(0,v.jsx)(j,{name:"code",hidden:!0,children:(0,v.jsx)(T.Z,{disabled:!0})}),(0,v.jsx)(j,{name:"stopProfit",label:"\u6B62\u76C8\u70B9",rules:[{required:!0}],children:(0,v.jsx)(Z.Z,{placeholder:"\u8BF7\u8F93\u5165"})}),(0,v.jsx)(j,{name:"stopLoss",label:"\u6B62\u635F\u70B9",rules:[{required:!0}],children:(0,v.jsx)(Z.Z,{placeholder:"\u8BF7\u8F93\u5165"})})]})}}}]);
